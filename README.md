# Enabling semi-trusted proxies for Data Spaces
This repository includes the source code used for the evaluation of the solution
presented in the paper "Enabling semi-trusted proxies for Data Spaces" (under review)

## Set up
Install the following dependencies

```bash
python3 -m pip install cryptography
python3 -m pip install jwcrypto
```

Execute `initialize.py` to generate the signing and verification keys, as well as
the test vectors

```bash
python3 initialize.py
```

## Benchmarking
### Signing

Execute the sign script 

```bash
python3 sign.py
```


### Selective disclosure

This script accepts as input an encoded object (as generated by the sign.py script) and a comma separated list of JSON paths, e.g., 

```bash
python3 disclose.py \
W1siL3R5cGUiLCAiY2FyIiwgInk3M3loNXV2Skdybm1TK0hvSlpRSEE9PSJdLCBbIi9icmFuZCIsICJid20iLCAiVXNmcDhEcUVZWm1CVTVUYStlSWdZUT09Il0sIFsiL3NwZWVkIiwgIjEyMCIsICJyU3JlOUlIbkJjc0wzQXFaYTExemxBPT0iXV0= \
"/type, /brand"
```
The script output a new encoded object that includes only the disclosed attributes. The rest of the attributes are replaced by their digest

```bash
W1siL3R5cGUiLCAiY2FyIiwgInk3M3loNXV2Skdybm1TK0hvSlpRSEE9PSJdLCBbIi9icmFuZCIsICJid20iLCAiVXNmcDhEcUVZWm1CVTVUYStlSWdZUT09Il0sICJ6TnRGYjRFdndJOVcrRmR5KzB4bjdYUE8vSzQ0NGYvWUlyczQ0SDVGNmhRPSJd
```

### Verify
This script will be executed by the IP data consumer. It accepts as input an encoded 
object (either generated by the sign.py or the disclose.py scripts) and the signature generated
by the sign.py script, e.g., 


```bash
python3 verify.py \
W1siL3R5cGUiLCAiY2FyIiwgInk3M3loNXV2Skdybm1TK0hvSlpRSEE9PSJdLCBbIi9icmFuZCIsICJid20iLCAiVXNmcDhEcUVZWm1CVTVUYStlSWdZUT09Il0sICJ6TnRGYjRFdndJOVcrRmR5KzB4bjdYUE8vSzQ0NGYvWUlyczQ0SDVGNmhRPSJd \
eyJhbGciOiJFUzI1NiJ9..NrBX6KOND5PMUBXWiYz5_i5fhEkhsf485zNg__eGAK-uoHdK3fxi4yFTMsib-hOuqm6FgGrzTIgQbvUoIi-1XQ
```

The script validates the signature and if it is valid it outputs the JSON object,
else it outputs -1,. e.g., 

```bash
{"type": "car", "brand": "bwm"}
```